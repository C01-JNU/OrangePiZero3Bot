# ============================================================================
# 立体匹配算法参数（CPU模式）
# ============================================================================
stereo:
  # ---------- 核心算法选择 ----------
  # 算法名称: "sgbm" 或 "bm"
  algorithm: "sgbm"

  # ---------- 通用参数 ----------
  # 最大视差搜索范围
  disparity_range: 64

  # 最小视差（通常为0）
  min_disparity: 0

  # 唯一性比率（%），仅用于SGBM（在WTA时使用）
  # 若 (第二小代价 / 最小代价) < (1 + uniqueness_ratio/100)，则标记为无效
  uniqueness_ratio: 15

  # 中值滤波器尺寸（必须为奇数），后处理中应用
  median_filter_size: 3

  # ---------- SGBM 特定参数 ----------
  sgbm:
    # 窗口大小（blockSize），必须为奇数
    block_size: 7

    # P1 惩罚参数（小视差变化）
    p1: 8.0

    # P2 惩罚参数（大视差变化）
    p2: 32.0

    # 视差窗口模式：true 为左右都检查（推荐）
    mode: true

  # ---------- BM 特定参数 ----------
  bm:
    # 窗口大小（blockSize），必须为奇数
    block_size: 7

    # 预处理滤波类型（0: 无, 1: 归一化响应, 2: Sobel）
    pre_filter_type: 1

    # 预处理滤波大小
    pre_filter_size: 9

    # 预处理滤波上限
    pre_filter_cap: 31

    # 纹理阈值
    texture_threshold: 10

    # 唯一性比率（%），与SGBM类似
    uniqueness_ratio: 15

    # 平滑窗口大小
    speckle_window_size: 100

    # 平滑视差差阈值
    speckle_range: 32

    # 是否尝试小视差
    try_small_disp: false
